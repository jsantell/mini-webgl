<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta name="description" content="MiniWebGL">
        <style>body, canvas { width: 100%; height: 100%; padding: 0; margin: 0; }</style>
        <script src="../vendor/webgl-debug.js"></script>
        <script src="../dist/mini-webgl.js"></script>
    </head>
    <body>
        <canvas></canvas>
        <script>
            var canvas = document.querySelector('canvas');

            var scene = new MiniWebGL.Scene(canvas);
            var camera = new MiniWebGL.Camera();
            onResize();
            var cube = new MiniWebGL.Model(new MiniWebGL.Cube(), new MiniWebGL.BasicMaterial());

            scene.useCamera(camera);
            cube.position = new Float32Array([0, 0.5, -3]);
            cube.scale = new Float32Array([0.5, 0.5, 0.5]);
            cube.updateMatrix();
            scene.add(cube);

            var t = performance.now();
            function tick () {
                t = performance.now();
                cube.rotation[1] = Math.cos(
                    t * 0.001
                ) + Math.PI;
                cube.rotation[0] = Math.sin(
                    t * 0.001
                ) + Math.PI;
                cube.updateMatrix();
                scene.render();
                requestAnimationFrame(tick);
            }
            tick();

            window.addEventListener('resize', onResize);

            function updateCanvasDimensions () {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            function onResize () {
                updateCanvasDimensions();
                scene.setSize(canvas.width, canvas.height);
                camera.aspect = canvas.width / canvas.height;
                camera.updateProjectionMatrix();
            }
        </script>
    </body>
</html>
